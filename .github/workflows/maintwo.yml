name: CI
on:

  push: 
    branches: [  master ]
  pull_request:
    branches: [ master ]


   
jobs:
  lint:
     
     runs-on: ubuntu-latest
     steps:
          - name: Checkout the code
            uses: actions/checkout@v4

          - name: Set up JDK 11
            uses: actions/setup-java@v2
            with:
               distribution: 'zulu' 
               java-version: '11'

          - name: Grant execute permission for gradlew
            run: chmod +x ./gradlew

          - name: Cache Gradle dependencies
            uses: actions/cache@v3
            with:
              path: ~/.gradle/caches
              key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
              restore-keys: |
                ${{ runner.os }}-gradle-

          - name: Set up Android SDK
            uses: android-actions/setup-android@v2
            with:
              api-level: 31           # Your project's target SDK version
              build-tools: 31.0.0 

          - name: Run lint
            run: ./gradlew lintDebug
         
          - name: Upload html test report
            uses: actions/upload-artifact@v4
            with:
               name: index.html
               path: app/build/reports/lint-results-debug.html
